{% extends "page.html" %}

{% block content %}

<h5>Brand-new lecture:</h5>

<div class="alert alert-warning" role="alert">
  <a href="#" class="alert-link">Note:</a> Every header of lectures should be unique!
</div>

<br>

<form action="{{url_for('list_lectures')}}" method="post">
    {% if message == "" %}

    {{ form.hidden_tag() }}

    <div class="row">
        <div class="col">
          {{ form.Header(class_="form-control") }}
        </div>
    </div>

    <br>

    <div class="row">
        <div class="col">
          {{ form.Content(class_="form-control") }}
        </div>
    </div>

    <br>

    <div class="row">
        <div class="col-md-1">
          {{ form.Submit(class_="btn btn-primary") }}
        </div>
    </div>

    {% else %}

    {{ form.hidden_tag() }}

    <div class="row">
        <div class="col">
          {{ form.Header(class_="form-control is-invalid") }}
          <div class="invalid-feedback">
              {{message}}
          </div>
        </div>
    </div>

    <br>

    <div class="row">
        <div class="col">
          {{ form.Content(class_="form-control is-invalid") }}
        </div>
    </div>

    <br>

    <div class="row">
        <div class="col-md-1">
          {{ form.Submit(class_="btn btn-primary") }}
        </div>
    </div>

    {% endif %}
</form>

<br>
<br>

<h2>You have {{lectures_count}} saved lectures</h2>

<br>
<br>

{% for lecture in lectures %}

<br>
<br>

<ul class="list-inline">
  <li class="list-inline-item"><strong>{{lecture.Header}}</strong></li>
</ul>

<ul class="list-inline">
  <li class="list-inline-item"><strong>Date: {{lecture.Creation_Date}}</strong></li>
  <li class="list-inline-item"><strong>Status: {{lecture.Status}}</strong></li>
  <li class="list-inline-item"><a href="#" onclick="lectureEdit('{{lecture.Header}}');" class="btn btn-success">Edit</a></li>
  <li class="list-inline-item"><a href="#" onclick="lectureDrop('{{lecture.Header}}');" class="btn btn-danger">Delete</a></li>
</ul>

<p>{{lecture.Content}}</p>

{% endfor %}

<script>
    function lectureEdit(header) {
        document.cookie = "lecture_header=" + header;
        document.location.href = "/resource/edit";
    }

    function lectureDrop(header) {
        document.cookie = "lecture_header=" + header;
        document.location.href = "/resource/delete";
    }
</script>

{% endblock %}