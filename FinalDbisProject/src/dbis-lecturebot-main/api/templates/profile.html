{% extends "page.html" %}

{% block content %}

<div class="row">
  <div class="col-4">
    <div class="list-group" id="list-tab" role="tablist">
      <a class="list-group-item d-flex justify-content-between align-items-center list-group-item-action active" id="list-home-list" data-toggle="list" href="#list-home" role="tab" aria-controls="home">
        Total amount of lectures<span class="badge badge-primary badge-pill">{{count_of_lectures}}</span></a>
      <a class="list-group-item d-flex justify-content-between align-items-center list-group-item-action" id="list-profile-list" data-toggle="list" href="#list-profile" role="tab" aria-controls="profile">
        Total amount of resources<span class="badge badge-primary badge-pill">{{count_of_resources}}</span></a>
      <a class="list-group-item d-flex justify-content-between align-items-center list-group-item-action" id="list-messages-list" data-toggle="list" href="#list-messages" role="tab" aria-controls="messages">
        Account role<span class="badge badge-primary badge-pill">{{user_role}}</span></a>
    </div>
  </div>
  <div class="col-8">
    <div class="tab-content" id="nav-tabContent">
      <div class="tab-pane fade show active" id="list-home" role="tabpanel" aria-labelledby="list-home-list">
        <ul>
          <li><strong>Rules for adding lectures:</strong></li>
          <li>Length of header should be between <strong>1</strong> and <strong>250</strong> symbols.</li>
          <li>Header of every lecture should be <strong>unique</strong>!</li>
          <li>Length of content should be between <strong>1</strong> and <strong>5000</strong> symbols.</li>
          <li>Status of every new lecture is <strong>Pending</strong></li>
        </ul>
      </div>
      <div class="tab-pane fade" id="list-profile" role="tabpanel" aria-labelledby="list-profile-list">
        <ul>
          <li><strong>Rules for adding resources:</strong></li>
          <li>URL of resource should be between <strong>1</strong> and <strong>2048</strong> symbols.</li>
          <li>URL of every resource should be <strong>unique</strong>!</li>
          <li>Length of description should be between <strong>1</strong> and <strong>250</strong> symbols.</li>
        </ul>
      </div>
      <div class="tab-pane fade" id="list-messages" role="tabpanel" aria-labelledby="list-messages-list">
        Available roles: Admin, Moderator, Premium user, Default user.

        <ul>
          <li><strong>Privileges for roles:</strong></li>
          <li><strong>Admin:</strong> promoting roles for the users;</li>
          <li><strong>Moderator:</strong> approving / declining lectures;</li>
          <li><strong>Premium user:</strong> having cool status :);</li>
          <li><strong>Default user:</strong> no privileges;</li>
        </ul>
      </div>
    </div>
  </div>
</div>

{% if pending_lectures %}

<h5>Moderate lectures</h5>

{% for lecture in pending_lectures %}

<br>
<br>

<ul class="list-inline">
  <li class="list-inline-item"><strong>{{lecture.Header}}</strong></li>
</ul>

<ul class="list-inline">
  <li class="list-inline-item"><strong>Date: {{lecture.Creation_Date}}</strong></li>
  <li class="list-inline-item"><strong>Status: {{lecture.Status}}</strong></li>
  <li class="list-inline-item"><a href="#" onclick="approveLecture('{{lecture.Header}}', '{{lecture.User_Login}}');" class="btn btn-success">Approve</a></li>
  <li class="list-inline-item"><a href="#" onclick="declineLecture('{{lecture.Header}}', '{{lecture.User_Login}}');" class="btn btn-danger">Decline</a></li>
</ul>

<p>{{lecture.Content}}</p>

{% endfor %}

<script>
    function approveLecture(header, user) {
        document.cookie = "lecture_header=" + header;
        document.cookie = "lecture_user=" + user;
        document.location.href = "/api/lecture/approve";
    }

    function declineLecture(header, user) {
        document.cookie = "lecture_header=" + header;
        document.cookie = "lecture_user=" + user;
        document.location.href = "/api/lecture/decline";
    }
</script>

{% endif %}

{% endblock %}